# Quick start

## Installation

```bash
npm i @totejs/walletkit wagmi viem
```

- wagmi > 1.0.0
- viem > 1.0.0

## Examples

- [nextjs](https://github.com/node-real/walletkit/blob/main/examples/nextjs/pages/_app.tsx)
- [vite](https://github.com/node-real/walletkit/blob/main/examples/vite/src/App.tsx)

## Playground

<WalletKitExample />

## How to use

### 1. Import walletkit styles

```tsx live=false
// ðŸ‘‡ Import walletkit styles here.
import '@totejs/walletkit/styles.css';

import { WagmiConfig, createConfig } from 'wagmi';
import { chains } from './chains';
// ...
```

### 2. Add chain configurations

```tsx live=false
import { Chain } from 'wagmi';

export const chains: Chain[] = [
  {
    id: 204,
    name: 'opBNB Mainnet',
    network: 'opBNB Mainnet',
    nativeCurrency: {
      name: 'tcBNB',
      symbol: 'tcBNB',
      decimals: 18,
    },
    rpcUrls: {
      default: {
        http: ['https://opbnb-mainnet-rpc.bnbchain.org'],
      },
      public: {
        http: ['https://opbnb-mainnet-rpc.bnbchain.org'],
      },
    },
    blockExplorers: {
      etherscan: { name: 'opBNBScan', url: `https://mainnet.opbnbscan.com` },
      default: { name: 'opBNBScan', url: `https://mainnet.opbnbscan.com` },
    },
  },
  // ...
];
```

### 3. Add `WagmiConfig` and `WalletKitProvider` to your project

```tsx live=false
// ðŸ‘‡ Import walletkit styles here.
import '@totejs/walletkit/styles.css';

import { WagmiConfig, createConfig } from 'wagmi';
import { chains } from './chains';
import {
  WalletKitButton,
  WalletKitProvider,
  getDefaultConfig,
  WalletKitOptions,
  SwitchNetworkModal,
  ThemeMode,
} from '@totejs/walletkit';
import { metaMask, trustWallet, walletConnect } from '@totejs/walletkit/wallets';
import { useState } from 'react';

const config = createConfig(
  getDefaultConfig({
    autoConnect: true,
    appName: 'WalletKit',

    // WalletConnect 2.0 requires a projectId which you can create quickly
    // and easily for free over at WalletConnect Cloud https://cloud.walletconnect.com/sign-in
    walletConnectProjectId: 'e68a1816d39726c2afabf05661a32767',

    chains,
    connectors: [trustWallet(), metaMask(), walletConnect()],
  }),
);

const options: WalletKitOptions = {
  initialChainId: 56,
};

export default function App() {
  const [mode, setMode] = useState<ThemeMode>('light');
  const nextMode = mode === 'light' ? 'dark' : 'light';

  return (
    <WagmiConfig config={config}>
      <div>mode: {mode} </div>
      <button onClick={() => setMode(nextMode)}>switch to {nextMode}</button>
      <div style={{ height: 20 }} />

      <WalletKitProvider options={options} mode={mode} debugMode>
        <WalletKitButton />

        {/*
          ðŸ‘‡ Here's the SwitchNetworkModal
          If the user switches to a network that is not supported by our dapp,
          this modal will be displayed to remind the user to switch to our supported networks.
        */}
        <SwitchNetworkModal />
      </WalletKitProvider>
    </WagmiConfig>
  );
}
```

## useModal

```tsx live=false
import { useModal } from '@totejs/walletkit';

const { isOpen, onOpen, onClose } = useModal();
```

## Customizing wallets

```tsx live=false
import { metaMask, tokenPocket, trustWallet, walletConnect } from '@totejs/walletkit/wallets';

const config = createConfig(
  getDefaultConfig({
    appName: 'Test Connect Wallet',
    chains,
    walletConnectProjectId: 'xxx',
    autoConnect: true,
    connectors: [
      metaMask({
        name: 'MetaMask',
        logos: {
          default: <MetaMaskLogo />,
        },
        connectorOptions: {
          shimDisconnect: false,
        },
      }),
      trustWallet({
        name: 'Trust Wallet',
        logos: {
          default: <TrustWalletLogo />,
        },
        connectorOptions: {
          shimDisconnect: true,
        },
      }),
    ],
  }),
);
```

## Customizing ConnectButton

`WalletKitButton.Custom`

```tsx live=false
<WalletKitButton.Custom>
  {({ show, hide, isConnecting, isConnected, address, truncatedAddress }) => {
    if (isConnected) {
      return <div>{address}</div>;
    } else if (isConnecting) {
      return <div>{connecting}</div>;
    } else {
      return <button onClick={show}>connect</button>;
    }
  }}
</WalletKitButton.Custom>
```

`useModal`

```tsx live=false
import { useModal } from '@totejs/walletkit';

const { isOpen, onOpen, onClose } = useModal();
<button onClick={onOpen}>connect</button>;
```

## Handle wallet errors by yourself

```tsx live=false
<WalletKitProvider
  options={{
    initialChainId: 56,
    onError(error, description) {
      if (description) {
        toast.error({
          description,
        });
      } else {
        // TODO
      }
    },
  }}
>
  <Example />
</WalletKitProvider>
```

## Customizing theme

```tsx live=false
type ThemeMode = 'auto' | 'dark' | 'light';
type ThemeVariant = 'base';

<WalletKitProvider options={options} theme="base" mode="light" customTheme={customTheme}>
  <Example />
</WalletKitProvider>;
```

An exmaple for custom theme as follows, or you can configure themes in both light and dark modes,
for more details, please click
[here](https://github.com/node-real/walletkit/blob/main/packages/walletkit/src/themes/base.ts).

```tsx live=false
const customTheme = {
  colors: {
    text: '#1E2026',
    textSecondary: '#76808F',
    primary: '#CC9D09',
    primaryActive: '#F0B90B',
    error: '#D9304E',
    errorActive: '#B82942',
    border: '#E6E8EA',
    disabled: '#AEB4BC',

    modalBackground: '#FFFFFF',
    modalOverlay: 'rgba(0, 0, 0, 0.5)',

    buttonText: 'var(--wk-colors-text)',
    buttonTextHover: 'var(--wk-colors-text)',
    buttonBackground: '#f5f5f5',
    buttonBackgroundHover: rgba('#F0B90B', 0.1),

    connectButtonText: 'var(--wk-colors-text)',
    connectButtonTextHover: 'var(--wk-colors-text)',
    connectButtonBackground: '#f5f5f5',
    connectButtonBackgroundHover: '#e6e8ea',

    navButtonText: 'var(--wk-colors-textSecondary)',
    navButtonBackgroundHover: 'var(--wk-colors-border)',

    disconnectButtonBackgroundText: 'var(--wk-colors-text)',
    disconnectButtonBackgroundTextHover: 'var(--wk-colors-text)',
    disconnectButtonBackground: 'transparent',
    disconnectButtonBackgroundHover: 'var(--wk-colors-border)',
    disconnectButtonBorder: 'var(--wk-colors-border)',
    disconnectButtonBorderHover: 'var(--wk-colors-border)',

    optionText: 'var(--wk-colors-text)',
    optionTextHover: 'var(--wk-colors-text)',
    optionBackground: '#f5f5f5',
    optionBackgroundHover: rgba('#F0B90B', 0.1),

    walletOptionText: 'var(--wk-colors-optionText)',
    walletOptionTextHover: 'var(--wk-colors-optionTextHover)',
    walletOptionBackground: 'var(--wk-colors-optionBackground)',
    walletOptionBackgroundHover: 'var(--wk-colors-optionBackgroundHover)',

    chainOptionText: 'var(--wk-colors-optionText)',
    chainOptionTextHover: 'var(--wk-colors-optionTextHover)',
    chainOptionBackground: 'var(--wk-colors-optionBackground)',
    chainOptionBackgroundHover: 'var(--wk-colors-optionBackgroundHover)',

    toastBackground: 'var(--wk-colors-modalBackground)',

    qrCodeDot: 'var(--wk-colors-text)',
    qrCodeBorder: 'var(--wk-colors-border)',
  },
  shadows: {
    toast: '0px 4px 24px rgba(0, 0, 0, 0.08)',
  },
  radii: {
    common: '8px',
    modal: '12px',

    navButton: '4px',
    button: 'var(--wk-radii-common)',
    connectButton: 'var(--wk-radii-common)',
    disconnectButton: 'var(--wk-radii-common)',
    walletOption: 'var(--wk-radii-common)',
    walletOptionIcon: 'var(--wk-radii-common)',
    chainOption: 'var(--wk-radii-common)',
    toast: 'var(--wk-radii-common)',
    qrCode: 'var(--wk-radii-common)',
  },
};
```

## Type definitions

### 1. WalletKitProviderProps

```tsx live=false
export interface WalletKitProviderProps {
  options: WalletKitOptions;
  children: any;
  debugMode?: boolean;
  theme?: ThemeVariant;
  mode?: ThemeMode;
  customTheme?: CustomTheme;
}
```

### 2. WalletKitOptions

```tsx live=false
interface WalletKitOptions {
  // Once connected to the wallet, which chainId you want to switch
  initialChainId?: number;

  hideNoWalletCTA?: boolean;
  hideOfficialWalletConnectCTA?: boolean;
  walletDownloadUrl?: string;

  chainsConfig?: ChainProps[];

  onClickWallet?: (connector: Connector, e?: React.MouseEvent) => undefined | boolean;

  // !!! Notice
  // This callback takes effect only if ConnectButton's connectMode='add-network'
  // will be called if network has already added to the wallet
  onChainAlreadyAdded?: (connector: Connector, chainId: number) => void;

  // handle wallet errors by yourself
  onError?: (error: any, description: string) => void;
}

// example
const options = {
  initialChainId: 5600,
  walletDownloadUrl: 'https://metamask.io/download',
  onClickWallet(connector) {},
  onChainAlreadyAdded() {},
  onError(error, description) {
    console.log(error);
  },
};
```

### 3. DefaultConfigProps

```tsx live=false
export interface DefaultConfigProps {
  appName: string;
  appIcon?: string;
  appDescription?: string;
  appUrl?: string;

  /* WC 2.0 requires a project ID (get one here: https://cloud.walletconnect.com/sign-in) */
  walletConnectProjectId?: string;
  alchemyId?: string;
  infuraId?: string;

  chains?: Chain[];
  connectors?: Array<WalletProps | Connector>;

  autoConnect?: boolean;
  publicClient?: any;
  webSocketPublicClient?: any;
  enableWebSocketPublicClient?: boolean;
  stallTimeout?: number;
}
```
