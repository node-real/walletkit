import{k as A,d as q,f as F,t as K,n as Ke,i as $e,I as Xe,s as H,B as Qe,h as V,j as ze,c as N,l as W}from"./index-77e8a596.js";const Ye=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Je=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ze(e){const{domain:n={},message:t,primaryType:s}=e,c={EIP712Domain:sn({domain:n}),...e.types};tn({domain:n,message:t,primaryType:s,types:c});const i=["0x1901"];return n&&i.push(xe({domain:n,types:c})),s!=="EIP712Domain"&&i.push($({data:t,primaryType:s,types:c})),A(q(i))}function xe({domain:e,types:n}){return $({data:e,primaryType:"EIP712Domain",types:n})}function $({data:e,primaryType:n,types:t}){const s=X({data:e,primaryType:n,types:t});return A(s)}function X({data:e,primaryType:n,types:t}){const s=[{type:"bytes32"}],c=[en({primaryType:n,types:t})];for(const i of t[n]){const[u,l]=z({types:t,name:i.name,type:i.type,value:e[i.name]});s.push(u),c.push(l)}return F(s,c)}function en({primaryType:e,types:n}){const t=K(nn({primaryType:e,types:n}));return A(t)}function nn({primaryType:e,types:n}){let t="";const s=Q({primaryType:e,types:n});s.delete(e);const c=[e,...Array.from(s).sort()];for(const i of c)t+=`${i}(${n[i].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`;return t}function Q({primaryType:e,types:n},t=new Set){const s=e.match(/^\w*/u),c=s==null?void 0:s[0];if(t.has(c)||n[c]===void 0)return t;t.add(c);for(const i of n[c])Q({primaryType:i.type,types:n},t);return t}function z({types:e,name:n,type:t,value:s}){if(e[t]!==void 0)return[{type:"bytes32"},A(X({data:s,primaryType:t,types:e}))];if(t==="bytes")return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},A(s)];if(t==="string")return[{type:"bytes32"},A(K(s))];if(t.lastIndexOf("]")===t.length-1){const c=t.slice(0,t.lastIndexOf("[")),i=s.map(u=>z({name:n,type:c,types:e,value:u}));return[{type:"bytes32"},A(F(i.map(([u])=>u),i.map(([,u])=>u)))]}return[{type:t},s]}function tn(e){const{domain:n,message:t,primaryType:s,types:c}=e,i=(u,l)=>{for(const f of u){const{name:I,type:g}=f,h=l[I],p=g.match(Je);if(p&&(typeof h=="number"||typeof h=="bigint")){const[L,S,B]=p;Ke(h,{signed:S==="int",size:Number.parseInt(B)/8})}if(g==="address"&&typeof h=="string"&&!$e(h))throw new Xe({address:h});const D=g.match(Ye);if(D){const[L,S]=D;if(S&&H(h)!==Number.parseInt(S))throw new Qe({expectedSize:Number.parseInt(S),givenSize:H(h)})}const w=c[g];w&&i(w,h)}};c.EIP712Domain&&n&&i(c.EIP712Domain,n),s!=="EIP712Domain"&&i(c[s],t)}function sn({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},typeof(e==null?void 0:e.chainId)=="number"&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}const an=`Ethereum Signed Message:
`;function rn(e){const n=(()=>typeof e=="string"?V(e):typeof e.raw=="string"?e.raw:ze(e.raw))(),t=V(`${an}${H(n)}`);return q([t,n])}function cn(e,n){return A(rn(e),n)}const on=()=>"9.1.0",un=e=>e.toString(16).padStart(2,"0"),dn=e=>{const n=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(n),Array.from(n,un).join("")},ln=()=>typeof window<"u"?dn(10):new Date().getTime().toString(36);class P{}P.makeRequest=(e,n)=>({id:ln(),method:e,params:n,env:{sdkVersion:on()}});P.makeResponse=(e,n,t)=>({id:e,success:!0,version:t,data:n});P.makeErrorResponse=(e,n,t)=>({id:e,success:!1,error:n,version:t});var E;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(E||(E={}));var U;(function(e){e.requestAddressBook="requestAddressBook"})(U||(U={}));class fn{constructor(n=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:s,data:c,source:i})=>{const u=!c,l=!this.isServer&&i===window.parent,f=typeof c.version<"u"&&parseInt(c.version.split(".")[0]),I=typeof f=="number"&&f>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(h=>h.test(s))!==void 0),!u&&l&&I&&g},this.logIncomingMessage=s=>{console.info(`Safe Apps SDK v1: A message was received from origin ${s.origin}. `,s.data)},this.onParentMessage=s=>{this.isValidMessage(s)&&(this.debugMode&&this.logIncomingMessage(s),this.handleIncomingMessage(s.data))},this.handleIncomingMessage=s=>{const{id:c}=s,i=this.callbacks.get(c);i&&(i(s),this.callbacks.delete(c))},this.send=(s,c)=>{const i=P.makeRequest(s,c);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(i,"*"),new Promise((u,l)=>{this.callbacks.set(i.id,f=>{if(!f.success){l(new Error(f.error));return}u(f)})})},this.allowedOrigins=n,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}}const Y=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var C={},T={},y={},G=N&&N.__awaiter||function(e,n,t,s){function c(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function l(g){try{I(s.next(g))}catch(h){u(h)}}function f(g){try{I(s.throw(g))}catch(h){u(h)}}function I(g){g.done?i(g.value):c(g.value).then(l,f)}I((s=s.apply(e,n||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.getData=y.fetchData=y.stringifyQuery=y.insertParams=void 0;const gn=e=>typeof e=="object"&&e!==null&&"code"in e&&"message"in e;function hn(e,n,t){return e.replace(new RegExp(`\\{${n}\\}`,"g"),t)}function En(e,n){return n?Object.keys(n).reduce((t,s)=>hn(t,s,String(n[s])),e):e}y.insertParams=En;function _n(e){if(!e)return"";const n=new URLSearchParams;Object.keys(e).forEach(s=>{e[s]!=null&&n.append(s,String(e[s]))});const t=n.toString();return t?`?${t}`:""}y.stringifyQuery=_n;function J(e){return G(this,void 0,void 0,function*(){let n;try{n=yield e.json()}catch{n={}}if(!e.ok){const t=gn(n)?`CGW error - ${n.code}: ${n.message}`:`CGW error - status ${e.statusText}`;throw new Error(t)}return n})}function Tn(e,n,t,s,c){return G(this,void 0,void 0,function*(){const i=Object.assign({"Content-Type":"application/json"},s),u={method:n??"POST",headers:i};c&&(u.credentials=c),t!=null&&(u.body=typeof t=="string"?t:JSON.stringify(t));const l=yield fetch(e,u);return J(l)})}y.fetchData=Tn;function yn(e,n,t){return G(this,void 0,void 0,function*(){const s={method:"GET"};n&&(s.headers=Object.assign(Object.assign({},n),{"Content-Type":"application/json"})),t&&(s.credentials=t);const c=yield fetch(e,s);return J(c)})}y.getData=yn;Object.defineProperty(T,"__esModule",{value:!0});T.getEndpoint=T.deleteEndpoint=T.putEndpoint=T.postEndpoint=void 0;const O=y;function R(e,n,t,s){const c=(0,O.insertParams)(n,t),i=(0,O.stringifyQuery)(s);return`${e}${c}${i}`}function In(e,n,t){const s=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(s,"POST",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.postEndpoint=In;function vn(e,n,t){const s=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(s,"PUT",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.putEndpoint=vn;function mn(e,n,t){const s=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(s,"DELETE",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.deleteEndpoint=mn;function An(e,n,t,s){if(s)return(0,O.getData)(s,void 0,t==null?void 0:t.credentials);const c=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.getData)(c,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.getEndpoint=An;var M={};Object.defineProperty(M,"__esModule",{value:!0});M.DEFAULT_BASE_URL=void 0;M.DEFAULT_BASE_URL="https://safe-client.safe.global";var Z={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0,function(n){n.UP_TO_DATE="UP_TO_DATE",n.OUTDATED="OUTDATED",n.UNKNOWN="UNKNOWN"}(e.ImplementationVersionState||(e.ImplementationVersionState={}))})(Z);var x={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0,function(n){n.NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST"}(e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={})),function(n){n.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(e.SafeAppFeatures||(e.SafeAppFeatures={})),function(n){n.TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD"}(e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))})(x);var ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.StartTimeValue=e.DurationType=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0,function(n){n[n.CALL=0]="CALL",n[n.DELEGATE=1]="DELEGATE"}(e.Operation||(e.Operation={})),function(n){n.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",n.AWAITING_EXECUTION="AWAITING_EXECUTION",n.CANCELLED="CANCELLED",n.FAILED="FAILED",n.SUCCESS="SUCCESS"}(e.TransactionStatus||(e.TransactionStatus={})),function(n){n.INCOMING="INCOMING",n.OUTGOING="OUTGOING",n.UNKNOWN="UNKNOWN"}(e.TransferDirection||(e.TransferDirection={})),function(n){n.ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_COIN="NATIVE_COIN"}(e.TransactionTokenType||(e.TransactionTokenType={})),function(n){n.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",n.ADD_OWNER="ADD_OWNER",n.REMOVE_OWNER="REMOVE_OWNER",n.SWAP_OWNER="SWAP_OWNER",n.CHANGE_THRESHOLD="CHANGE_THRESHOLD",n.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",n.ENABLE_MODULE="ENABLE_MODULE",n.DISABLE_MODULE="DISABLE_MODULE",n.SET_GUARD="SET_GUARD",n.DELETE_GUARD="DELETE_GUARD"}(e.SettingsInfoType||(e.SettingsInfoType={})),function(n){n.TRANSFER="Transfer",n.SETTINGS_CHANGE="SettingsChange",n.CUSTOM="Custom",n.CREATION="Creation",n.SWAP_ORDER="SwapOrder",n.TWAP_ORDER="TwapOrder",n.SWAP_TRANSFER="SwapTransfer"}(e.TransactionInfoType||(e.TransactionInfoType={})),function(n){n.NONE="None",n.HAS_NEXT="HasNext",n.END="End"}(e.ConflictType||(e.ConflictType={})),function(n){n.TRANSACTION="TRANSACTION",n.LABEL="LABEL",n.CONFLICT_HEADER="CONFLICT_HEADER",n.DATE_LABEL="DATE_LABEL"}(e.TransactionListItemType||(e.TransactionListItemType={})),function(n){n.MULTISIG="MULTISIG",n.MODULE="MODULE"}(e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={})),function(n){n.AUTO="AUTO",n.LIMIT_DURATION="LIMIT_DURATION"}(e.DurationType||(e.DurationType={})),function(n){n.AT_MINING_TIME="AT_MINING_TIME",n.AT_EPOCH="AT_EPOCH"}(e.StartTimeValue||(e.StartTimeValue={})),function(n){n.Queued="Queued",n.Next="Next"}(e.LabelValue||(e.LabelValue={}))})(ee);var ne={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0,function(n){n.API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN"}(e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={})),function(n){n.ORACLE="ORACLE",n.FIXED="FIXED",n.FIXED_1559="FIXED1559",n.UNKNOWN="UNKNOWN"}(e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={})),function(n){n.ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"}(e.FEATURES||(e.FEATURES={}))})(ne);var te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(n){n.ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_TOKEN="NATIVE_TOKEN"}(e.TokenType||(e.TokenType={}))})(te);var se={};Object.defineProperty(se,"__esModule",{value:!0});var ie={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfirmationViewTypes=void 0,function(n){n.COW_SWAP_ORDER="COW_SWAP_ORDER",n.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER"}(e.ConfirmationViewTypes||(e.ConfirmationViewTypes={}))})(ie);var ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0,function(n){n.DATE_LABEL="DATE_LABEL",n.MESSAGE="MESSAGE"}(e.SafeMessageListItemType||(e.SafeMessageListItemType={})),function(n){n.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",n.CONFIRMED="CONFIRMED"}(e.SafeMessageStatus||(e.SafeMessageStatus={}))})(ae);var re={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceType=void 0,function(n){n.ANDROID="ANDROID",n.IOS="IOS",n.WEB="WEB"}(e.DeviceType||(e.DeviceType={}))})(re);var ce={};Object.defineProperty(ce,"__esModule",{value:!0});(function(e){var n=N&&N.__createBinding||(Object.create?function(a,r,o,d){d===void 0&&(d=o);var m=Object.getOwnPropertyDescriptor(r,o);(!m||("get"in m?!r.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(a,d,m)}:function(a,r,o,d){d===void 0&&(d=o),a[d]=r[o]}),t=N&&N.__exportStar||function(a,r){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&n(r,a,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.verifyAuth=e.getAuthNonce=e.getContract=e.getSafeOverviews=e.unsubscribeAll=e.unsubscribeSingle=e.registerRecoveryModule=e.deleteRegisteredEmail=e.getRegisteredEmail=e.verifyEmail=e.resendEmailVerificationCode=e.changeEmail=e.registerEmail=e.unregisterDevice=e.unregisterSafe=e.registerDevice=e.getDelegates=e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.getConfirmationView=e.proposeTransaction=e.getNonces=e.postSafeGasEstimation=e.deleteTransaction=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getAllOwnedSafes=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.getRelayCount=e.relayTransaction=e.setBaseUrl=void 0;const s=T,c=M;t(Z,e),t(x,e),t(ee,e),t(ne,e),t(te,e),t(se,e),t(ie,e),t(ae,e),t(re,e),t(ce,e);let i=c.DEFAULT_BASE_URL;const u=a=>{i=a};e.setBaseUrl=u;function l(a,r){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/relay",{path:{chainId:a},body:r})}e.relayTransaction=l;function f(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:a,address:r}})}e.getRelayCount=f;function I(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:a,address:r}})}e.getSafeInfo=I;function g(a,r,o,d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:a,address:r},query:o},d)}e.getIncomingTransfers=g;function h(a,r,o,d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:a,address:r},query:o},d)}e.getModuleTransactions=h;function p(a,r,o,d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:a,address:r},query:o},d)}e.getMultisigTransactions=p;function D(a,r,o="usd",d={}){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:a,address:r,currency:o},query:d})}e.getBalances=D;function w(){return(0,s.getEndpoint)(i,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=w;function L(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:a,address:r}})}e.getOwnedSafes=L;function S(a){return(0,s.getEndpoint)(i,"/v1/owners/{address}/safes",{path:{address:a}})}e.getAllOwnedSafes=S;function B(a,r,o={}){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:a,address:r},query:o})}e.getCollectibles=B;function de(a,r,o={},d){return(0,s.getEndpoint)(i,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:a,address:r},query:o},d)}e.getCollectiblesPage=de;function le(a,r,o={},d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:a,safe_address:r},query:o},d)}e.getTransactionHistory=le;function fe(a,r,o={},d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:a,safe_address:r},query:o},d)}e.getTransactionQueue=fe;function ge(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:a,transactionId:r}})}e.getTransactionDetails=ge;function he(a,r,o){return(0,s.deleteEndpoint)(i,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:a,safeTxHash:r},body:{signature:o}})}e.deleteTransaction=he;function Ee(a,r,o){return(0,s.postEndpoint)(i,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:a,safe_address:r},body:o})}e.postSafeGasEstimation=Ee;function _e(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:a,safe_address:r}})}e.getNonces=_e;function Te(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:a,safe_address:r},body:o})}e.proposeTransaction=Te;function ye(a,r,o,d){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:a,safe_address:r},body:{data:o,to:d}})}e.getConfirmationView=ye;function Ie(a){return(0,s.getEndpoint)(i,"/v1/chains",{query:a})}e.getChainsConfig=Ie;function ve(a){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}",{path:{chainId:a}})}e.getChainConfig=ve;function me(a,r={}){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safe-apps",{path:{chainId:a},query:r})}e.getSafeApps=me;function Ae(a){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:a}})}e.getMasterCopies=Ae;function Se(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/data-decoder",{path:{chainId:a},body:{data:r,to:o}})}e.getDecodedData=Se;function Oe(a,r,o){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:a,safe_address:r},query:{}},o)}e.getSafeMessages=Oe;function Ne(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:a,message_hash:r}})}e.getSafeMessage=Ne;function be(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:a,safe_address:r},body:o})}e.proposeSafeMessage=be;function Ce(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:a,message_hash:r},body:o})}e.confirmSafeMessage=Ce;function pe(a,r={}){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/delegates",{path:{chainId:a},query:r})}e.getDelegates=pe;function De(a){return(0,s.postEndpoint)(i,"/v1/register/notifications",{body:a})}e.registerDevice=De;function we(a,r,o){return(0,s.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:a,safe_address:r,uuid:o}})}e.unregisterSafe=we;function Pe(a,r){return(0,s.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:a,uuid:r}})}e.unregisterDevice=Pe;function Re(a,r,o,d){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:a,safe_address:r},body:o,headers:d})}e.registerEmail=Re;function Me(a,r,o,d,m){return(0,s.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:a,safe_address:r,signer:o},body:d,headers:m})}e.changeEmail=Me;function Le(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:a,safe_address:r,signer:o},body:""})}e.resendEmailVerificationCode=Le;function Be(a,r,o,d){return(0,s.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:a,safe_address:r,signer:o},body:d})}e.verifyEmail=Be;function He(a,r,o,d){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:a,safe_address:r,signer:o},headers:d})}e.getRegisteredEmail=He;function Ue(a,r,o,d){return(0,s.deleteEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:a,safe_address:r,signer:o},headers:d})}e.deleteRegisteredEmail=Ue;function je(a,r,o){return(0,s.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:a,safe_address:r},body:o})}e.registerRecoveryModule=je;function Ge(a){return(0,s.deleteEndpoint)(i,"/v1/subscriptions",{query:a})}e.unsubscribeSingle=Ge;function Ve(a){return(0,s.deleteEndpoint)(i,"/v1/subscriptions/all",{query:a})}e.unsubscribeAll=Ve;function We(a,r){return(0,s.getEndpoint)(i,"/v1/safes",{query:Object.assign(Object.assign({},r),{safes:a.join(",")})})}e.getSafeOverviews=We;function ke(a,r){return(0,s.getEndpoint)(i,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:a,contractAddress:r}})}e.getContract=ke;function qe(){return(0,s.getEndpoint)(i,"/v1/auth/nonce",{credentials:"include"})}e.getAuthNonce=qe;function Fe(a){return(0,s.postEndpoint)(i,"/v1/auth/verify",{body:a,credentials:"include"})}e.verifyAuth=Fe})(C);class Sn{constructor(n){this.communicator=n}async getBySafeTxHash(n){if(!n)throw new Error("Invalid safeTxHash");return(await this.communicator.send(E.getTxBySafeTxHash,{safeTxHash:n})).data}async signMessage(n){const t={message:n};return(await this.communicator.send(E.signMessage,t)).data}async signTypedMessage(n){if(!Y(n))throw new Error("Invalid typed data");return(await this.communicator.send(E.signTypedMessage,{typedData:n})).data}async send({txs:n,params:t}){if(!n||!n.length)throw new Error("No transactions were passed");const s={txs:n,params:t};return(await this.communicator.send(E.sendTransactions,s)).data}}const _={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},v={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class On{constructor(n){this.communicator=n,this.call=this.buildRequest({call:_.eth_call,formatters:[null,v.defaultBlockParam]}),this.getBalance=this.buildRequest({call:_.eth_getBalance,formatters:[null,v.defaultBlockParam]}),this.getCode=this.buildRequest({call:_.eth_getCode,formatters:[null,v.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:_.eth_getStorageAt,formatters:[null,v.blockNumberToHex,v.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:_.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:_.eth_getBlockByHash,formatters:[null,v.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:_.eth_getBlockByNumber,formatters:[v.blockNumberToHex,v.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:_.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:_.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:_.eth_getTransactionCount,formatters:[null,v.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:_.eth_gasPrice}),this.getEstimateGas=t=>this.buildRequest({call:_.eth_estimateGas})([t]),this.setSafeSettings=this.buildRequest({call:_.safe_setSettings})}buildRequest(n){const{call:t,formatters:s}=n;return async c=>{s&&Array.isArray(c)&&s.forEach((l,f)=>{l&&(c[f]=l(c[f]))});const i={call:t,params:c||[]};return(await this.communicator.send(E.rpcCall,i)).data}}}const Nn="0x1626ba7e",bn="0x20c13b0b",j=4001;class b extends Error{constructor(n,t,s){super(n),this.code=t,this.data=s,Object.setPrototypeOf(this,b.prototype)}}class oe{constructor(n){this.communicator=n}async getPermissions(){return(await this.communicator.send(E.wallet_getPermissions,void 0)).data}async requestPermissions(n){if(!this.isPermissionRequestValid(n))throw new b("Permissions request is invalid",j);try{return(await this.communicator.send(E.wallet_requestPermissions,n)).data}catch{throw new b("Permissions rejected",j)}}isPermissionRequestValid(n){return n.every(t=>typeof t=="object"?Object.keys(t).every(s=>!!Object.values(U).includes(s)):!1)}}const k=(e,n)=>n.some(t=>t.parentCapability===e),Cn=()=>(e,n,t)=>{const s=t.value;return t.value=async function(){const c=new oe(this.communicator);let i=await c.getPermissions();if(k(n,i)||(i=await c.requestPermissions([{[n]:{}}])),!k(n,i))throw new b("Permissions rejected",j);return s.apply(this)},t};var pn=globalThis&&globalThis.__decorate||function(e,n,t,s){var c=arguments.length,i=c<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,n,t,s);else for(var l=e.length-1;l>=0;l--)(u=e[l])&&(i=(c<3?u(i):c>3?u(n,t,i):u(n,t))||i);return c>3&&i&&Object.defineProperty(n,t,i),i};class ue{constructor(n){this.communicator=n}async getChainInfo(){return(await this.communicator.send(E.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(E.getSafeInfo,void 0)).data}async experimental_getBalances({currency:n="usd"}={}){return(await this.communicator.send(E.getSafeBalances,{currency:n})).data}async check1271Signature(n,t="0x"){const s=await this.getInfo(),c=W({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),i={call:_.eth_call,params:[{to:s.safeAddress,data:c},"latest"]};try{return(await this.communicator.send(E.rpcCall,i)).data.slice(0,10).toLowerCase()===Nn}catch{return!1}}async check1271SignatureBytes(n,t="0x"){const s=await this.getInfo(),c=W({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),i={call:_.eth_call,params:[{to:s.safeAddress,data:c},"latest"]};try{return(await this.communicator.send(E.rpcCall,i)).data.slice(0,10).toLowerCase()===bn}catch{return!1}}calculateMessageHash(n){return cn(n)}calculateTypedMessageHash(n){const t=typeof n.domain.chainId=="object"?n.domain.chainId.toNumber():Number(n.domain.chainId);let s=n.primaryType;if(!s){const c=Object.values(n.types),i=Object.keys(n.types).filter(u=>c.every(l=>l.every(({type:f})=>f.replace("[","").replace("]","")!==u)));if(i.length===0||i.length>1)throw new Error("Please specify primaryType");s=i[0]}return Ze({message:n.message,domain:{...n.domain,chainId:t,verifyingContract:n.domain.verifyingContract,salt:n.domain.salt},types:n.types,primaryType:s})}async getOffChainSignature(n){return(await this.communicator.send(E.getOffChainSignature,n)).data}async isMessageSigned(n,t="0x"){let s;if(typeof n=="string"&&(s=async()=>{const c=this.calculateMessageHash(n);return await this.isMessageHashSigned(c,t)}),Y(n)&&(s=async()=>{const c=this.calculateTypedMessageHash(n);return await this.isMessageHashSigned(c,t)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(n,t="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const c of s)if(await c(n,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(E.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(E.requestAddressBook,void 0)).data}}pn([Cn()],ue.prototype,"requestAddressBook",null);class Dn{constructor(n={}){const{allowedDomains:t=null,debug:s=!1}=n;this.communicator=new fn(t,s),this.eth=new On(this.communicator),this.txs=new Sn(this.communicator),this.safe=new ue(this.communicator),this.wallet=new oe(this.communicator)}}const Pn=Dn,Rn=C.Operation,Mn=C.TokenType,Ln=C.TransactionStatus,Bn=C.TransferDirection;export{P as MessageFormatter,E as Methods,Rn as Operation,_ as RPC_CALLS,U as RestrictedMethods,Mn as TokenType,Ln as TransactionStatus,Bn as TransferDirection,Pn as default,on as getSDKVersion,Y as isObjectEIP712TypedData};
